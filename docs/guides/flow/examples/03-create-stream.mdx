---
id: "create-stream"
sidebar_position: 3
title: "Create a Stream"
---

import CodeBlock from "@theme/CodeBlock";
import HardcodedDemonstration from "../../../../src/snippets/_hardcoded-demonstration.mdx";
import CautionNonProduction from "../../../../src/snippets/_caution-non-production.mdx";

# Create a Flow stream

In this guide, we will show you how you can create a Flow stream using Solidity.

It is important to note that A Flow stream has no end date, which means it will continue to accumulate debt even if no
funds are deposited.

This guide assumes that you have already gone through the [Calculate Rate per Second](./02-calculate-rps.mdx) section.

<CautionNonProduction />

## Set up a contract

Declare the Solidity version used to compile the contract:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L1-L2`}
</CodeBlock>

Import the relevant symbols from `@sablier/flow`, and the `FlowUtilities` library:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L4-L8`}
</CodeBlock>

Create a contract called `FlowStreamCreator`, and declare a constant `USDC` of type `IERC20` and a constant `FLOW` of
type `ISablierFlow`:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L11-L13`}
</CodeBlock>

<HardcodedDemonstration protocol="Flow" />

We will declare two functions, based on the amount desired to stream over a period of time.

## Define a function

Define a function to stream a salary of 1000 USDC per month, call it `createStream_1K_PerMonth` which returns the newly
created stream ID:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L16-L16`}
</CodeBlock>

## Input parameters

### Rate Per Second

Use the [`FlowUtilities`](./02-calculate-rps.mdx) library to calculate the rate per second for the desired amount:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L17-L18`}
</CodeBlock>

### Sender

The address streaming the tokens, with the ability to `pause` the stream:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L21-L21`}
</CodeBlock>

### Recipient

The address receiving the tokens:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L22-L22`}
</CodeBlock>

### Start time

The timestamp when the stream starts.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L24-L24`}
</CodeBlock>

### Token

The contract address of the ERC-20 token used for streaming. In this example, we will stream `USDC`:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L25-L25`}
</CodeBlock>

### Transferable

Boolean that indicates whether the stream will be transferable or not.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L26-L26`}
</CodeBlock>

### Invoke the create function

With all the parameters, we can call the `create` function on the `FLOW` contract and assign the newly created stream to
`streamId` variable:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol#L20-L27`}
</CodeBlock>

## Full code

Below you can see the complete `FlowStreamCreator` contract:

<CodeBlock language="solidity" showLineNumbers metastring={`reference title="Flow Stream Creator"`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/flow/FlowStreamCreator.sol`}
</CodeBlock>
