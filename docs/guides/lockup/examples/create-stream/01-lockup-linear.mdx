---
id: "lockup-linear"
sidebar_position: 1
title: "Lockup Linear"
---

import CodeBlock from "@theme/CodeBlock";
import HardcodedDemonstration from "../../../../../src/snippets/_hardcoded-demonstration.mdx";
import CautionNonProduction from "../../../../../src/snippets/_caution-non-production.mdx";
import LockupParam from "../../../../../src/snippets/_lockup-params.mdx";
import TokenApproval from "../../../../../src/snippets/_token-approval.mdx";

# Create a Lockup Linear Stream

Linear streams are streams with a linear streaming function. In this guide, we will show you how to create a Lockup
Linear stream using Solidity.

This guide assumes that you have already gone through the [Protocol Concepts](/concepts/streaming) section.

<CautionNonProduction />

## Set up a contract

Declare the Solidity version used to compile the contract:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L1-L2`}
</CodeBlock>

Import the relevant symbols from `@sablier/lockup`:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L4-L7`}
</CodeBlock>

Create a contract called `LockupLinearStreamCreator`, and declare a constant `DAI` of type `IERC20` and a constant
`LOCKUP` of type `ISablierLockup`:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L13-L15`}
</CodeBlock>

<HardcodedDemonstration protocol="Lockup" />

There are two create functions in the Lockup contract that can be used to create Linear streams:

- `createWithDurationsLL`: takes duration and calculates the start and end timestamps based on the provided durations.
- `createWithTimestampsLL`: takes start and end timestamps.

Which one you choose depends upon your use case. In this guide, we will use `createWithDurationsLL`.

## Function definition

Define a function called `createStream` which takes a single parameter `depositAmount`, and which returns the id of the
created stream:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L18`}
</CodeBlock>

<TokenApproval />

## Parameters

The struct associated with
[`createWithDurationsLL`](/reference/lockup/contracts/interfaces/interface.ISablierLockupLinear#createwithdurationsll)
are [`Lockup.CreateWithDurations`](/reference/lockup/contracts/types/library.Lockup#createwithdurations) (a shared
struct across all the lockup streams),
[`LockupLinear.UnlockAmounts`](/reference/lockup/contracts/types/library.LockupLinear#unlockamounts) and
[`LockupLinear.Durations`](/reference/lockup/contracts/types/library.LockupLinear#durations).

Let's review each parameter in detail.

### Create With Durations

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L26`}
</CodeBlock>

<LockupParam />

### Unlock Amounts

Struct containing details on unlock amounts at start time and at cliff time.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L36`}
</CodeBlock>

### Durations

Struct containing (i) cliff duration and (ii) total stream duration, both denoted in seconds.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L37-L40`}
</CodeBlock>

## Invoke the create function

With all parameters set, we can now call the `createWithDurationsLL` function, and assign the id of the newly created
stream to a variable:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol#L43`}
</CodeBlock>

## Full code

Below you can see the full code. You can also access the code on GitHub through
[this link](https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol).

<CodeBlock language="solidity" showLineNumbers metastring={`reference title="Lockup Linear Stream Creator"`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/lockup/LockupLinearStreamCreator.sol`}
</CodeBlock>
