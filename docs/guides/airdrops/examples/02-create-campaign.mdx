---
id: "create-campaign"
sidebar_position: 2
title: "Create Campaigns"
---

import CodeBlock from "@theme/CodeBlock";
import HardcodedDemonstration from "../../../../src/snippets/_hardcoded-demonstration.mdx";
import CautionNonProduction from "../../../../src/snippets/_caution-non-production.mdx";

# Create Airdrop Campaigns

In this guide, we will show you how you can use Solidity to create a campaigns via the Merkle Factories.

This guide assumes that you have already gone through the [Protocol Concepts](/concepts/airdrops) section.

<CautionNonProduction />

## Set up a contract

Declare the Solidity version used to compile the contract:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L1-L2`}
</CodeBlock>

Now, import the relevant symbols from `@sablier/lockup` and `@sablier/airdrops`:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L4-L16`}
</CodeBlock>

Create a contract called `MerkleCreator`, and declare a constant `DAI` of type `IERC20`, a constant `LOCKUP` of type
`ISablierLockup` and the factories constants of type `ISablierFactoryMerkleInstant`, `ISablierFactoryMerkleLL`,
`ISablierFactoryMerkleLT` and `ISablierFactoryMerkleVCA`.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L21-L33`}
</CodeBlock>

<HardcodedDemonstration protocol="Lockup" />

Factory address can be obtained from the [Merkle Airdrops Deployments](/guides/airdrops/deployments) page.

## Create function

There are four create functions available through the factories:

- [`createMerkleInstant`](/reference/airdrops/contracts/contract.SablierFactoryMerkleInstant#createmerkleinstant):
  creates campaign for instant distribution of tokens.
- [`createMerkleLL`](/reference/airdrops/contracts/contract.SablierFactoryMerkleLL#createmerklell): creates campaign
  with a Lockup Linear distribution.
- [`createMerkleLT`](/reference/airdrops/contracts/contract.SablierFactoryMerkleLT#createmerklelt): creates campaign
  with a Lockup Tranched distribution.
- [`createMerkleVCA`](/reference/airdrops/contracts/contract.SablierFactoryMerkleVCA#createmerklevca): creates campaign
  with a Variable Claim Amount distribution.

Which one you choose depends upon your use case. In this guide, we will use `createMerkleLL`.

:::note

Below we will focus only on the LL factory. The other factories follow the same pattern.

:::

## Function definition

Define a function called `createMerkleLL` that returns the address of newly deployed Merkle Lockup contract.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L59`}
</CodeBlock>

## Parameters

Merkle Factory uses [MerkleLL.ConstructorParams](/reference/airdrops/contracts/types/library.MerkleLL#constructorparams)
as the struct for the `createMerkleLL` function.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L61`}
</CodeBlock>

Let's review each parameter of the struct in detail.

### Token

The contract address of the ERC-20 token that you want to airdrop to your recipients. In this example, we will use DAI.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L64`}
</CodeBlock>

### Campaign Start Time

The unix timestamp indicating when the campaign starts. Users will be able to claim their airdrop after this time.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L65`}
</CodeBlock>

### Expiration

The unix timestamp indicating the expiration of the campaign. Once this time has been passed, users will no longer be
able to claim their airdrop. And you will be able to
[clawback](/reference/airdrops/contracts/abstracts/abstract.SablierMerkleBase#clawback) any unclaimed tokens from the
campaign.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L66`}
</CodeBlock>

### Initial Admin

This is the initial admin of the Airstream campaign. When a recipient claims his airdrop, a Lockup stream is created
with this admin as the sender of the stream. Another role of admin is to clawback unclaimed tokens from the campaign
post expiry and during grace period.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L67`}
</CodeBlock>

### IPFS CID

This is the content identifier (CID) for indexing the contract on IPFS. This is where we store addresses of the Airdrop
recipients and their claim amount.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L68`}
</CodeBlock>

### Merkle Root

These campaigns use a Merkle tree data structure to store the airdrop data onchain. As a result, you only pay the gas
fee to create the contract and store the Merkle root onchain. Airdrop recipients can then call the contract on their own
to claim their airdrop.

If you want to create the Merkle root programmatically, you can follow
[our guide on Merkle API](/api/airdrops/merkle-api/overview).

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L69`}
</CodeBlock>

### Campaign Name

The name of the campaign.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L70`}
</CodeBlock>

### Shape

A custom stream shape name for visualization in the UI. This helps users understand the vesting schedule visually.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L71`}
</CodeBlock>

### Lockup

The address of the Sablier Lockup contract that will be used to create the streams when recipients claim their airdrop.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L72`}
</CodeBlock>

### Vesting Start Time

The unix timestamp indicating when the vesting starts. If set to 0, the vesting will begin at the time of claim.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L73`}
</CodeBlock>

### Cliff Duration

The duration of the cliff period in seconds. During this period, no tokens will be unlocked.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L74`}
</CodeBlock>

### Cliff Unlock Percentage

The percentage of tokens to unlock after the cliff period ends. We want to unlock 0.01% after the cliff period.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L75`}
</CodeBlock>

### Start Unlock Percentage

The percentage of tokens to unlock at the vesting start time. We want to unlock 0.01% at the start.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L76`}
</CodeBlock>

### Total Duration

The total duration of vesting in seconds. This should be 90 days for this example.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L77`}
</CodeBlock>

### Cancelable

Boolean that indicates whether the stream will be cancelable or not after it has been claimed.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L78`}
</CodeBlock>

### Transferable

Boolean that indicates whether the stream will be transferable or not. This is the stream that users obtain when they
claim their airstream.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L79`}
</CodeBlock>

Now that we have the `params` ready, it's time to setup rest of the input parameters.

### Aggregate Amount

This is the total amount of tokens you want to airdrop to your users, denoted in units of the asset's decimals. Let's
say you want to airdrop 100M tokens of DAI. Then, the aggregate amount would be $100m\times 10^{18}$.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L82`}
</CodeBlock>

### Recipient Count

The total number of recipient addresses.

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L85`}
</CodeBlock>

## Invoke the create function

With all parameters set, we can now call the `createMerkleLL` function, and assign the address of the newly created
campaign to a variable:

<CodeBlock language="solidity" metastring={`reference title=""`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol#L89-L93`}
</CodeBlock>

## Full code

Below you can see the full code, including the other factories. You can also access the code on GitHub through
[this link](https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol).

<CodeBlock language="solidity" showLineNumbers metastring={`reference title="Merkle Campaign Creator"`}>
  {`https://github.com/sablier-labs/evm-examples/blob/main/airdrops/MerkleCreator.sol`}
</CodeBlock>
